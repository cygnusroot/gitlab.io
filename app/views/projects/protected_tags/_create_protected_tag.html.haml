- extra_toggle_classes = local_assigns.fetch(:extra_toggle_classes, [])
- dropdown_classes = local_assigns.fetch(:dropdown_classes, [])
- filter = local_assigns.fetch(:filter, false)
- create_access_levels_attributes_field_name = local_assigns.fetch(:create_access_levels_attributes_field_name, 'protected_tag[create_access_levels_attributes][0][access_level]')

= form_for [@project.namespace.becomes(Namespace), @project, @protected_tag], html: { class: 'new-protected-tag js-new-protected-tag' } do |f|
  .card
    .card-header
      %h3.card-title
        Protect a tag
    .card-body
      = form_errors(@protected_tag)
      .form-group.row
        = f.label :name, class: 'col-md-2 text-right' do
          Tag:
        .col-md-10.protected-tags-dropdown
          = render partial: "projects/protected_tags/shared/dropdown", locals: { f: f }
          .form-text.text-muted
            = link_to 'Wildcards', help_page_path('user/project/protected_tags', anchor: 'wildcard-protected-tags')
            such as
            %code v*
            or
            %code *-release
            are supported
      .form-group.row
        %label.col-md-2.text-right{ for: 'create_access_levels_attributes' }
          Allowed to create:
        .col-md-10
          .create_access_levels-container
            = dropdown_tag('Select',
                           options: { toggle_class: %w[js-allowed-to-create wide].concat(extra_toggle_classes).join(' '),
                           dropdown_class: %w[dropdown-menu-selectable capitalize-header].concat(dropdown_classes).join(' '),
                           filter: filter,
                           data: { input_id: 'create_access_levels_attributes', field_name: create_access_levels_attributes_field_name }})
          = render_if_exists 'projects/protected_refs/share_projects_with_other_groups_notice'

    .card-footer
      = f.submit 'Protect', class: 'btn-create btn', disabled: true
