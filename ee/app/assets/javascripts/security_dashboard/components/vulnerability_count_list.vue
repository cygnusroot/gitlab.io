<script>
import { mapGetters } from 'vuex';
import VulnerabilityCount from './vulnerability_count.vue';

export default {
  name: 'VulnerabilityCountList',
  components: {
    VulnerabilityCount,
  },
  computed: {
    ...mapGetters(['vulnerabilitiesCountBySeverity']),
    counts() {
      return [
        { severity: 'critical', count: this.vulnerabilitiesCountBySeverity('critical') },
        { severity: 'high', count: this.vulnerabilitiesCountBySeverity('high') },
        { severity: 'medium', count: this.vulnerabilitiesCountBySeverity('medium') },
        { severity: 'low', count: this.vulnerabilitiesCountBySeverity('low') },
        { severity: 'unknown', count: this.vulnerabilitiesCountBySeverity('unknown') },
      ];
    },
  },
};
</script>

<template>
  <div class="vulnerabilities-count-list">
    <div class="row">
      <div
        v-for="count in counts"
        :key="count.severity"
        class="col-md col-sm-6 js-count"
      >
        <vulnerability-count
          :severity="count.severity"
          :count="count.count"
        />
      </div>
    </div>
  </div>
</template>

<style>
.vulnerabilities-count-list {
  display: block;
  padding: 2.5em 0 1.5em;
  border-bottom: 1px solid #e5e5e5;
  margin-bottom: 3px;
}
</style>

